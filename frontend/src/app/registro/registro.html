<div class="registro-container">
  <main class="registro-main">
    <div class="card">

      <!-- Brand -->
      <header class="card-brand">
        <span class="logo" aria-label="Xuxemons">ðŸŽ® Xuxemons</span>
      </header>

      <!-- Heading -->
      <div class="card-header">
        <h1>Crear cuenta</h1>
        <p id="registro-desc">Ãšnete a la aventura y empieza a capturar Xuxemons</p>
      </div>

      <!-- Resumen de errores al enviar -->
      <div
        role="alert"
        aria-live="polite"
        aria-atomic="true"
        class="form-error-summary"
        *ngIf="formSubmitted && form.invalid"
      >
        <span aria-hidden="true">âš </span>
        Por favor, revisa los campos marcados antes de continuar.
      </div>

      <form
        [formGroup]="form"
        class="form"
        (ngSubmit)="onSubmit()"
        novalidate
        aria-describedby="registro-desc"
      >

        <!-- Nombre -->
        <div class="field">
          <label for="nombre" class="field-label">
            Nombre de entrenador
            <span class="required-mark" aria-hidden="true">*</span>
            <span class="visually-hidden">campo obligatorio</span>
          </label>
          <div class="input-wrapper" [class.error]="getError('nombre')">
            <input
              id="nombre"
              type="text"
              class="field-input"
              placeholder="Tu nombre de entrenador"
              formControlName="nombre"
              autocomplete="given-name"
              aria-required="true"
              [attr.aria-invalid]="getError('nombre') ? 'true' : 'false'"
              aria-describedby="nombre-error nombre-hint"
            />
          </div>
          <p id="nombre-hint" class="field-hint">AsÃ­ te verÃ¡n los otros entrenadores</p>
          <p
            id="nombre-error"
            class="error-msg"
            role="alert"
            aria-live="polite"
            *ngIf="getError('nombre')"
          >
            <span class="error-icon" aria-hidden="true">âœ•</span>
            {{ getError('nombre') }}
          </p>
        </div>

        <!-- Correo -->
        <div class="field">
          <label for="correo" class="field-label">
            Correo electrÃ³nico
            <span class="required-mark" aria-hidden="true">*</span>
            <span class="visually-hidden">campo obligatorio</span>
          </label>
          <div class="input-wrapper" [class.error]="getError('correo')">
            <input
              id="correo"
              type="email"
              class="field-input"
              placeholder="entrenador@xuxemons.com"
              formControlName="correo"
              autocomplete="email"
              aria-required="true"
              [attr.aria-invalid]="getError('correo') ? 'true' : 'false'"
              aria-describedby="correo-error correo-hint"
            />
          </div>
          <p id="correo-hint" class="field-hint">Usaremos este correo para notificaciones</p>
          <p
            id="correo-error"
            class="error-msg"
            role="alert"
            aria-live="polite"
            *ngIf="getError('correo')"
          >
            <span class="error-icon" aria-hidden="true">âœ•</span>
            {{ getError('correo') }}
          </p>
        </div>

        <!-- DNI / NIE -->
        <div class="field">
          <label for="dni" class="field-label">
            DNI / NIE
            <span class="required-mark" aria-hidden="true">*</span>
            <span class="visually-hidden">campo obligatorio</span>
          </label>
          <div class="input-wrapper" [class.error]="getError('dni')">
            <input
              id="dni"
              type="text"
              class="field-input"
              placeholder="12345678A"
              formControlName="dni"
              autocomplete="off"
              aria-required="true"
              [attr.aria-invalid]="getError('dni') ? 'true' : 'false'"
              aria-describedby="dni-error dni-hint"
            />
          </div>
          <p id="dni-hint" class="field-hint">Formato DNI: 8 dÃ­gitos y una letra (ej: 12345678A). NIE: letra, 7 dÃ­gitos, letra (ej: X1234567A)</p>
          <p
            id="dni-error"
            class="error-msg"
            role="alert"
            aria-live="polite"
            *ngIf="getError('dni')"
          >
            <span class="error-icon" aria-hidden="true">âœ•</span>
            {{ getError('dni') }}
          </p>
        </div>

        <!-- ContraseÃ±a -->
        <div class="field">
          <label for="contrasena" class="field-label">
            ContraseÃ±a
            <span class="required-mark" aria-hidden="true">*</span>
            <span class="visually-hidden">campo obligatorio</span>
          </label>
          <div class="input-wrapper" [class.error]="getError('contrasena')">
            <input
              id="contrasena"
              [type]="mostrarPassword ? 'text' : 'password'"
              class="field-input field-input-password"
              placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
              formControlName="contrasena"
              autocomplete="new-password"
              aria-required="true"
              [attr.aria-invalid]="getError('contrasena') ? 'true' : 'false'"
              aria-describedby="contrasena-error contrasena-hint"
            />
            <button
              type="button"
              class="password-toggle"
              (click)="mostrarPassword = !mostrarPassword"
              [attr.aria-label]="mostrarPassword ? 'Ocultar contraseÃ±a' : 'Mostrar contraseÃ±a'"
              [attr.aria-pressed]="mostrarPassword"
            >
              <svg *ngIf="!mostrarPassword" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#6a7280" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" focusable="false">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
              <svg *ngIf="mostrarPassword" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#3d4faa" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" focusable="false">
                <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94"/>
                <path d="M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19"/>
                <line x1="1" y1="1" x2="23" y2="23"/>
              </svg>
            </button>
          </div>
          <p id="contrasena-hint" class="field-hint">MÃ­nimo 6 caracteres</p>
          <p
            id="contrasena-error"
            class="error-msg"
            role="alert"
            aria-live="polite"
            *ngIf="getError('contrasena')"
          >
            <span class="error-icon" aria-hidden="true">âœ•</span>
            {{ getError('contrasena') }}
          </p>
        </div>

        <!-- Repetir contraseÃ±a -->
        <div class="field">
          <label for="repetirContrasena" class="field-label">
            Repetir contraseÃ±a
            <span class="required-mark" aria-hidden="true">*</span>
            <span class="visually-hidden">campo obligatorio</span>
          </label>
          <div class="input-wrapper" [class.error]="getError('repetirContrasena')">
            <input
              id="repetirContrasena"
              [type]="mostrarRepetirPassword ? 'text' : 'password'"
              class="field-input field-input-password"
              placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
              formControlName="repetirContrasena"
              autocomplete="new-password"
              aria-required="true"
              [attr.aria-invalid]="getError('repetirContrasena') ? 'true' : 'false'"
              aria-describedby="repetirContrasena-error"
            />
            <button
              type="button"
              class="password-toggle"
              (click)="mostrarRepetirPassword = !mostrarRepetirPassword"
              [attr.aria-label]="mostrarRepetirPassword ? 'Ocultar confirmaciÃ³n de contraseÃ±a' : 'Mostrar confirmaciÃ³n de contraseÃ±a'"
              [attr.aria-pressed]="mostrarRepetirPassword"
            >
              <svg *ngIf="!mostrarRepetirPassword" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#6a7280" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" focusable="false">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
              <svg *ngIf="mostrarRepetirPassword" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#3d4faa" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" focusable="false">
                <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94"/>
                <path d="M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19"/>
                <line x1="1" y1="1" x2="23" y2="23"/>
              </svg>
            </button>
          </div>
          <p
            id="repetirContrasena-error"
            class="error-msg"
            role="alert"
            aria-live="polite"
            *ngIf="getError('repetirContrasena')"
          >
            <span class="error-icon" aria-hidden="true">âœ•</span>
            {{ getError('repetirContrasena') }}
          </p>
        </div>

        <!-- Submit -->
        <button type="submit" class="btn-primary">
          Crear cuenta
        </button>

        <p class="login-link">
          Â¿Ya tienes cuenta? <a routerLink="/login">Inicia sesiÃ³n</a>
        </p>

      </form>
    </div>
  </main>

  <footer class="registro-footer">
    <p>&copy; 2026 Xuxemons Â· Tots els drets reservats</p>
  </footer>
</div>
